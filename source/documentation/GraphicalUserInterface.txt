.. _GraphicalUserInterface:

************************************************************
Creating a Condition File Using the Graphical User Interface
************************************************************

A user may construct the :file:`condition.txt` file by hand or by using the
Graphical User Interface.

.. _launching:

Launching the Graphical User Interface
======================================

For Linux users, run the following command to launch the GUI::

    $ java -Xmx500m -classpath $RMG GUI > output &

For Windows users, run the following set of commands to launch the GUI::

	cd "%rmg%"\software\rmg
	java -cp RMG.jar GUI	 

.. _tabInitialCondition:

The "Initial Conditions" tab
============================

.. figure:: images/tab_initialConditions.png

	Initial Conditions tab

This tab of the GUI allows the user to enter the :ref:`Reactants <reactants>`, :ref:`Inert Gases <inertgas>`, and
:ref:`Initial Conditions <initialconditions>` for the simulation.

Reactants and Inert Gases
-------------------------

For each species, a "Name," "Concentration," "Units," and "Reactivity" must be
specified.  The three options for "Reactivity" are:

- Inert Gas - a species for which RMG will not build a reaction mechanism for

- Unreactive - a species for which RMG will build a mechanism for, but only according to the list of reactions the user has provided

- Reactive - a species for which RMG will build a mechanism for, according to the reaction family templates located in the :file:`RMG_database/kinetics` folder
 	
If the species is selected as an "Inert Gas," no structural information for the
molecule is necessary.

If the species is selected as either "Unreactive" or "Reactive," the user must
supply structural information about the molecule.  This information may be provided
in one of three ways: adjacency list, InChI, or .mol file.

An example of an adjacency list (for methane) is::

	1 C 0 {2,S} {3,S} {4,S} {5,S}
	2 H 0 {1,S}
	3 H 0 {1,S}
	4 H 0 {1,S}
	5 H 0 {1,S}

An equally valid adjacency list for methane (with the Hydrogen atoms removed) is::

	1 C 0

If the user knows the InChI of the molecule (and the InChI executable is located
in the :file:`RMG/software/InChI` folder), the GUI will convert the InChI to an adjacency
list upon pushing the "Add" button.  The InChI for methane is::

	InChI=1/CH4/h1H4

Upon pushing the "Add" button, if neither an adjacency list or InChI have been provided, the GUI will ask the user for the location of the .mol file associated
with this species.  If the InChI executable is in the proper folder, the GUI will convert the .mol file to an adjacency list.

The user may add/remove species to the model by clicking the appropriate buttons.

Unreactive Species
------------------

If an "Unreactive" species is added to the model, the GUI will ask the user for the
location of the :file:`IncludeSpecies.txt` file.  If no "Unreactive" species are added to
the model, the "Location of IncludeSpecies.txt" field will remain inactive.

Initial Conditions
------------------

RMG currently only has one pressure/temperature model: "Constant".  However, the user
may specify a list of temperatures and pressures for which to build the reaction
mechanism.  The list of temperatures (or pressures) should be separated from one another
with a blank space or a return carriage.

.. _tabThermochemicalLibraries:

The "Thermochemical Libraries" tab
==================================

.. figure:: images/tab_thermochemLibraries.png

	Thermochemical Libraries tab

This tab of the GUI allows the user to enter the location of the thermochemical libraries RMG will use in building the model.

The default location of the :ref:`Main Database <database>` is the :file:`RMG/database/RMG_database` folder.  We recommend to use the default settings.

The default location of the :ref:`Primary Thermo Library <primarythermolibrary>` is the :file:`RMG/database/RMG_database/thermo/PrimaryThermoLibrary` folder.  We recommend to use the default settings.

By default, the :ref:`Primary Reaction Library <primaryreactionlibrary>` is turned off.  If the user turns on
the "Primary Reaction Library," a "Name" and "Location" must be specified.

.. note::

	The order of the "Primary Reaction Libraries" in the table is important.  The
	order established in the table will be conserved when writing the :file:`condition.txt`
	file.  For any reactions that appear in multiple "Primary Reaction Libraries", RMG
	will use the information contained in the first "Primary Reaction Library" if the reaction
	is found and ignore all others.

.. _tabTermination:

The "Termination" tab
=====================

.. figure:: images/tab_termination.png

	Termination tab

This tab of the GUI allows the user to specify the :ref:`termination criteria <finishcontroller>` for the
model.  A user may specify either the desired "ReactionTime" or "Conversion".

If "Conversion" is selected, the user must specify a species and a fraction
conversion (ranging from 0 to 1).  The "Species" drop-down menu will only contain the
"Reactive" and "Unreactive" species specified in the Initialization tab.

If "ReactionTime" is selected, the user must specify the value and units of the desired reaction time.

Lastly, the user must specify an "Error tolerance" for the model.  If building a
mechanism for a new system, we recommend starting with a high "Error tolerance"
(e.g 0.1).

.. _tabDynamicSimulator:

The "Dynamic Simulator" tab
===========================

.. figure:: images/tab_dynamicSimulator.png

	Dynamic Simulator tab

This tab of the GUI allows the user to specify options for: 

* :ref:`the ODE solver <dynamicsimulator>`
* :ref:`building a pressure dependent mechanism <pressuredependence>`
* :ref:`constructing InChIs <InChIgeneration>`

The ODE Solver
--------------

The user must select a "Dynamic Simulator" and set the Absolute and Relative
Tolerances for that Dynamic Simulator.  The user may also select Intermediate times
or conversions for RMG to check whether the reaction mechanism needs to be enlarged.
We recommend using the automatic time stepping, which is invoked by typing "AUTO"
in the "Intermediate" time/conversion fields.

The "Intermediate Conversions" field will be enabled (and the "Intermediate Time
Steps" field will be disabled) if the "Termination Goal" was chosen as
"Conversion" on the :ref:`Termination <tabTermination>` tab.

.. note::

	If the user specifies "Intermediate Time Steps," the values must have units of Seconds.

The pressure dependence model
-----------------------------

The user must specify a :ref:`pressure dependence model <pressuredependence>`.  The options are:

* off
* Modified Strong Collision
* Reservoir State

If the user specifies a pressure dependent model, the "Spectroscopic Data Estimator" field will be enabled.  The options are:

* Frequency Groups
* Three Frequency Model (only available for users with **therfit.exe**)

Optional fields
---------------

Some optional fields the user may change are:

* Equation of State
* InChI generation
	
The user has two options for the "Equation of State":

* Ideal Gas
* Liquid
	
The difference between the two options is that RMG will not re-normalize the concentrations of the reactants if they do not satisfy PV=nRT.

The user may also choose to turn off/on the generation of :ref:`InChIs <InChIgeneration>`.  If the user
chooses to turn InChI generation on, the InChI executable (v 1.01) must be located in the :file:`RMG/software/InChI` folder.

.. _tabSensitivityAnalysis:

The "Sensitivity Analysis" tab
==============================

.. figure:: images/tab_sensAnalysis.png

	Sensitivity Analysis tab

This tab of the GUI allows the user to specify options for error bars and 
sensitivity coefficients.  The features of this tab will only be active if
"DASPK" is selected as the "Dynamic Simulator"  on the :ref:`Dynamic Simulator <tabDynamicSimulator>` tab.

The user may turn the generation of error bars "on" or "off."  If turned on, error bars will be generated for all species in the model.

The user may also turn the generation of sensitivity coefficients "on" or "off."
The sensitivity coefficients will only be generated for the species listed in the "Molecule" table.  The order in which the species appear in the table is not important.

.. _saveFile:

Saving the file
===============

To save the file, the user can either press the "Save" button near the bottom of
the GUI or selecting "File" --> "Save" from the navigation toolbar.  The file does
not have to be named condition.txt.  Also, the user may add additional comments to
the :file:`condition.txt` file by adding information to the text field at the bottom of the
GUI.  These comments will be added to the header of the saved file.

To save and immediately run a file, the user can press the "Save and Run" button
near the bottom of the GUI.

.. _openFile:

Opening a file
==============

To open and import the information from a :file:`condition.txt` file, the user can select
"File" --> "Open" from the navigation toolbar.

.. note::
	The comments in the header of the file will not be imported.

.. _runFile:

Running the file
================

To run a file without viewing it, the user can select "Run" --> "Run RMG" from the navigation toolbar.